<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>

<h1>nested.html</h1>
<div id="list1" class="list">
	<div data-id="1.1">Item 1.1
		<div class="list n1">
			<div data-id="2.1">Item 2.1</div>
			<div data-id="2.2">Item 2.2
				<div class="list n2">
					<div data-id="3.1">Item 3.1</div>
					<div data-id="3.2">Item 3.2</div>
					<div data-id="3.3">Item 3.3</div>
					<div data-id="3.4">Item 3.4</div>
				</div>
			</div>
			<div data-id="2.3">Item 2.3</div>
			<div data-id="2.4">Item 2.4</div>
		</div>
	</div>
	<div data-id="1.2">Item 1.2</div>
	<div data-id="1.3">Item 1.3</div>
	<div data-id="1.4">Item 1.4
		<div class="list n1">
			<div data-id="2.1">Item 2.1</div>
			<div data-id="2.2">Item 2.2</div>
			<div data-id="2.3">Item 2.3</div>
			<div data-id="2.4">Item 2.4</div>
		</div>
	</div>
	<div data-id="1.5">Item 1.5</div>
</div>

<p id="as-array">
</p>

<p id="structure-mode0">
</p>

<p id="structure-mode1">
</p>

<p id="structure-mode2">
</p>

<br><br><br><br>

<style>
	.n1 > div {
		background-color: lightblue;
	}

	.n2 > div {
		background-color: lightgreen
	}

	.list {
		padding: 50px;
	}

</style>

<script src="../Sortable.js"></script>

<script type="text/javascript">
	var elements = document.getElementsByClassName('list');

	for (var i = 0; i < elements.length; i++) {
		new Sortable(elements[i], {
			group: 'shared',
			invertSwap: true,
			recursionTags: [ "DIV" ],
			onEnd: (evt) => {
				let rootSortable = Sortable.get(document.getElementById('list1'));
				let asArray = rootSortable.toArray();
				document.getElementById('as-array').innerHTML = JSON.stringify( asArray );
				let mode0 = rootSortable.getHierarchy();
				document.getElementById('structure-mode0').innerHTML = JSON.stringify( mode0 );
				let mode1 = rootSortable.getHierarchy(1);
				document.getElementById('structure-mode1').innerHTML = JSON.stringify( mode1 );
				let mode2 = rootSortable.getHierarchy(2);
				document.getElementById('structure-mode2').innerHTML = JSON.stringify( mode2 );
			}
		});
	}
</script>

</body>
</html>

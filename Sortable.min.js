/*! Sortable 1.6.2 - MIT | git://github.com/rubaxa/Sortable.git */
!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&void 0!==module.exports?module.exports=t():window.Sortable=t()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,n,o,i,a,r,s,l,c,h,d,u,f,p,g,v,m,b,_,y,D,w={},C=/\s+/g,T=/left|right|inline/,E="Sortable"+(new Date).getTime(),S=window,x=S.document,N=S.parseInt,Y=S.jQuery||S.Zepto,k=S.Polymer,B=!1,X=!!("draggable"in x.createElement("div")),M=!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&((D=x.createElement("x")).style.cssText="pointer-events:auto","auto"===D.style.pointerEvents),O=!1,P=Math.abs,R=Math.min,A=[],I=[],F=nt(function(t,e,n){if(n&&e.scroll){var o,i,a,r,h,d,u=n[E],f=e.scrollSensitivity,p=e.scrollSpeed,g=t.clientX,v=t.clientY,m=window.innerWidth,b=window.innerHeight;if(l!==n&&(s=e.scroll,l=n,c=e.scrollFn,!0===s)){s=n;do{if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break}while(s=s.parentNode)}s&&(o=s,i=s.getBoundingClientRect(),a=(P(i.right-g)<=f)-(P(i.left-g)<=f),r=(P(i.bottom-v)<=f)-(P(i.top-v)<=f)),a||r||(r=(b-v<=f)-(v<=f),((a=(m-g<=f)-(g<=f))||r)&&(o=S)),w.vx===a&&w.vy===r&&w.el===o||(w.el=o,w.vx=a,w.vy=r,clearInterval(w.pid),o&&(w.pid=setInterval(function(){if(d=r?r*p:0,h=a?a*p:0,"function"==typeof c)return c.call(u,h,d,t);o===S?S.scrollTo(S.pageXOffset+h,S.pageYOffset+d):(o.scrollTop+=d,o.scrollLeft+=h)},24)))}},30),L=function(t){function e(t,e){return void 0!==t&&!0!==t||(t=n.name),"function"==typeof t?t:function(n,o){var i=o.options.group.name;return e?t:t&&(t.join?t.indexOf(i)>-1:i==t)}}var n={},o=t.group;o&&"object"==typeof o||(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n};function W(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,-1===this.el.className.indexOf("sortable")&&(this.el.className+=" sortable"),this.options=e=ot({},e),t[E]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackPosition:"element",fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},captureMode:!1,dragWillChange:!0,allowDragX:!0,allowDragY:!0,elementFromPoint:!1,ghost:!1,onGhostMove:!1,constrainGhost:!1};for(var o in n)!(o in e)&&(e[o]=n[o]);for(var i in L(e),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&X,y=e,j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart),j(t,"pointerdown",this._onTapStart),j(t,"destroy",this._destroy),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),I.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function G(e,n){"clone"!==e.lastPullMode&&(n=!0),o&&o.state!==n&&(q(o,"display",n?"none":""),n||o.state&&(e.options.group.revertClone?(i.insertBefore(o,a),e._animate(t,o)):i.insertBefore(o,t)),o.state=n)}function U(t,e,n){if(t){n=n||x;do{if(">*"===e&&t.parentNode===n||et(t,e))return t}while(void 0,t=(i=(o=t).host)&&i.nodeType?i:o.parentNode)}var o,i;return null}function j(t,e,n){var o=B;y&&!0===y.captureMode&&(o={capture:!0,passive:!1}),t.addEventListener(e,n,o)}function H(t,e,n){var o=B;y&&!0===y.captureMode&&(o={capture:!0,passive:!1}),t.removeEventListener(e,n,o)}function V(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(C," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(C," ")}}function q(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return x.defaultView&&x.defaultView.getComputedStyle?n=x.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function z(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,a=o.length;if(n)for(;i<a;i++)n(o[i],i);return o}return[]}function Q(t,e,n,i,a,r,s,l){t=t||e[E];var c=x.createEvent("Event"),h=t.options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);c.initEvent(n,!0,!0),c.to=e,c.from=a||e,c.item=i||e,c.clone=o,c.oldIndex=r,c.newIndex=s,l&&(c.clientY=l.clientY),e.dispatchEvent(c),h[d]&&h[d].call(t,c)}function Z(t,e,n,o,i,a,r,s){var l,c,h=t[E],d=h.options.onMove;return(l=x.createEvent("Event")).initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=i||e,l.relatedRect=a||e.getBoundingClientRect(),l.willInsertAfter=s,l.clientY=r.clientY,l.clientX=r.clientX,t.dispatchEvent(l),d&&(c=d.call(h,l,r)),c}function J(t){t.draggable=!1}function K(){O=!1}function $(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function tt(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!et(t,e)||n++;return n}function et(t,e){if(t){var n=(e=e.split(".")).shift().toUpperCase(),o=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==n&&t.nodeName.toUpperCase()!=n||e.length&&((" "+t.className+" ").match(o)||[]).length!=e.length)}return!1}function nt(t,e){var n,o;return function(){void 0===n&&(n=arguments,o=this,setTimeout(function(){1===n.length?t.call(o,n[0]):t.apply(o,n),n=void 0},e))}}function ot(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function it(t){return Y?Y(t).clone(!0)[0]:k&&k.dom?k.dom(t).cloneNode(!0):t.cloneNode(!0)}W.prototype={constructor:W,_onTapStart:function(e){var n,o=this,i=this.el,a=this.options,s=a.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],h=(c||e).target,d=e.target.shadowRoot&&e.path&&e.path[0]||h,u=a.filter;if(function(t){var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var o=e[n];o.checked&&A.push(o)}}(i),!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||a.disabled)&&(h=U(h,a.draggable,i))&&r!==h){if(n=tt(h,a.draggable),"function"==typeof u){if(u.call(this,e,h,this))return Q(o,d,"filter",h,i,n),void(s&&e.preventDefault())}else if(u&&(u=u.split(",").some(function(t){if(t=U(d,t.trim(),i))return Q(o,t,"filter",h,i,n),!0})))return void(s&&e.preventDefault());if(a.handle)if("function"==typeof a.handle){if(!1===a.handle.call(this,e,h,i,this))return}else if(!U(d,a.handle,i))return;this._prepareDragStart(e,c,h,n)}},_prepareDragStart:function(n,o,s,l){var c,h=this,d=h.el,u=h.options,p=d.ownerDocument;s&&!t&&s.parentNode===d&&(m=n,i=d,e=(t=s).parentNode,a=t.nextSibling,r=s,g=u.group,f=l,this._lastX=(o||n).clientX,this._lastY=(o||n).clientY,!0===u.dragWillChange&&(t.style["will-change"]="transform"),c=function(){h._disableDelayedDrag(),t.draggable=h.nativeDraggable,V(t,u.chosenClass,!0),h._triggerDragStart(n,o),Q(h,i,"choose",t,i,f,n)},u.ignore.split(",").forEach(function(e){z(t,e.trim(),J)}),j(p,"mouseup",h._onDrop),j(p,"touchend",h._onDrop),j(p,"touchcancel",h._onDrop),j(p,"pointercancel",h._onDrop),j(p,"selectstart",h),u.delay?(j(p,"mouseup",h._disableDelayedDrag),j(p,"touchend",h._disableDelayedDrag),j(p,"touchcancel",h._disableDelayedDrag),j(p,"mousemove",h._disableDelayedDrag),j(p,"touchmove",h._disableDelayedDrag),j(p,"pointermove",h._disableDelayedDrag),h._dragStartTimer=setTimeout(c,u.delay)):c())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),H(t,"mouseup",this._disableDelayedDrag),H(t,"touchend",this._disableDelayedDrag),H(t,"touchcancel",this._disableDelayedDrag),H(t,"mousemove",this._disableDelayedDrag),H(t,"touchmove",this._disableDelayedDrag),H(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,n){(n=n||("touch"==e.pointerType?e:null))?(m={target:t,clientX:n.clientX,clientY:n.clientY},this._onDragStart(m,"touch")):this.nativeDraggable?(j(t,"dragend",this),j(i,"dragstart",this._onDragStart)):this._onDragStart(m,!0);try{x.selection?setTimeout(function(){x.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(e){if(i&&t){var n=this.options;V(t,n.ghostClass,!0),V(t,n.dragClass,!1),W.active=this,Q(this,i,"start",t,i,f,0,e)}else this._nulling()},_emulateDragOver:function(){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY)return;this._lastX=b.clientX,this._lastY=b.clientY,M||q(n,"display","none");var t,e,o=I.length;if(e=t="function"==typeof this.options.elementFromPoint?this.options.elementFromPoint(b.clientX,b.clientY):x.elementFromPoint(b.clientX,b.clientY))do{if(e[E]){for(;o--;)I[o]({clientX:b.clientX,clientY:b.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);M||q(n,"display","")}},_onTouchMove:function(e){if(m){var o,i,a=this.options,r=a.fallbackTolerance,s=a.fallbackOffset,l=e.touches?e.touches[0]:e,c=!1!==a.allowDragX?l.clientX-m.clientX+s.x:0,h=!1!==a.allowDragY?l.clientY-m.clientY+s.y:0,d=e.touches?"translate3d("+c+"px,"+h+"px,0)":"translate("+c+"px,"+h+"px)";if(!W.active){if(r&&R(P(l.clientX-this._lastX),P(l.clientY-this._lastY))<r)return;this._dragStarted(e)}this._appendGhost(),_=!0,b=l,!0!==a.constrainGhost||0===h&&0===c||(o=t.getBoundingClientRect(),i=this.el.getBoundingClientRect(),o.top+h<i.top?h=i.top-o.top:o.bottom+h>i.bottom&&(h=i.bottom-o.bottom),o.left+c<i.left?c=i.left-o.left:o.right+c>i.right&&(c=i.right-o.right),d=e.touches?"translate3d("+c+"px,"+h+"px,0)":"translate("+c+"px,"+h+"px)"),"function"==typeof a.onGhostMove&&a.onGhostMove(n,c,h),q(n,"webkitTransform",d),q(n,"mozTransform",d),q(n,"msTransform",d),q(n,"transform",d),e.preventDefault()}},_appendGhost:function(){if(!n){var e,o=t.getBoundingClientRect(),a=q(t),r=this.options;if("function"==typeof r.ghost){var s=r.ghost(t);n=s.el,o=s.rect}else n=t.cloneNode(!0);V(n,r.ghostClass,!1),V(n,r.fallbackClass,!0),V(n,r.dragClass,!0),"cursor"===r.fallbackPosition?(q(n,"top",this._lastY-10),q(n,"left",this._lastX-20)):(q(n,"top",o.top-N(a.marginTop,10)),q(n,"left",o.left-N(a.marginLeft,10))),q(n,"width",o.width),q(n,"height",o.height),q(n,"opacity","0.8"),q(n,"position","fixed"),q(n,"zIndex","100000"),q(n,"pointerEvents","none"),r.fallbackOnBody&&x.body.appendChild(n)||i.appendChild(n),e=n.getBoundingClientRect(),q(n,"width",2*o.width-e.width),q(n,"height",2*o.height-e.height)}},_onDragStart:function(e,n){var a=e.dataTransfer,r=this.options;this._offUpEvents(),g.checkPull(this,this,t,e)&&((o=it(t)).draggable=!1,o.style["will-change"]="",q(o,"display","none"),V(o,this.options.chosenClass,!1),i.insertBefore(o,t),Q(this,i,"clone",t)),V(t,r.dragClass,!0),n?("touch"===n?(j(x,"touchmove",this._onTouchMove),j(x,"touchend",this._onDrop),j(x,"touchcancel",this._onDrop),j(x,"pointermove",this._onTouchMove),j(x,"pointerup",this._onDrop)):(j(x,"mousemove",this._onTouchMove),j(x,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(a&&(a.effectAllowed="move",r.setData&&r.setData.call(this,a,t)),j(x,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(r){var s,l,c,f,p,m,b=this.el,y=this.options,D=y.group,w=W.active,C=g===D,S=!1,x=y.sort;if((void 0!==r.preventDefault&&(r.preventDefault(),!y.dragoverBubble&&r.stopPropagation()),!t.animated)&&(_=!0,w&&!y.disabled&&(C?x||(f=!i.contains(t)):v===this||(w.lastPullMode=g.checkPull(this,w,t,r))&&D.checkPut(this,w,t,r))&&(void 0===r.rootEl||r.rootEl===this.el))){if(F(r,y,this.el),O)return;if(s=U(r.target,y.draggable,b),l=t.getBoundingClientRect(),v!==this&&(v=this,S=!0),f)return G(w,!0),e=i,void(o||a?i.insertBefore(t,o||a):x||i.appendChild(t));if(0===b.children.length||b.children[0]===n||b===r.target&&(p=r,m=b.lastElementChild.getBoundingClientRect(),p.clientY-(m.top+m.height)>5||p.clientX-(m.left+m.width)>5)){if(0!==b.children.length&&b.children[0]!==n&&b===r.target&&(s=b.lastElementChild),s){if(s.animated)return;c=s.getBoundingClientRect()}G(w,C),!1!==Z(i,b,t,l,s,c,r)&&(t.contains(b)||(b.appendChild(t),e=b),this._animate(l,t),s&&this._animate(c,s))}else if(s&&!s.animated&&s!==t&&void 0!==s.parentNode[E]){h!==s&&(h=s,d=q(s),u=q(s.parentNode));var N=(c=s.getBoundingClientRect()).right-c.left,Y=c.bottom-c.top,k=T.test(d.cssFloat+d.display)||"flex"==u.display&&0===u["flex-direction"].indexOf("row"),B=s.offsetWidth>t.offsetWidth,X=s.offsetHeight>t.offsetHeight,M=(k?(r.clientX-c.left)/N:(r.clientY-c.top)/Y)>.5,P=s.nextElementSibling,R=!1;if(k){var A=t.offsetTop,I=s.offsetTop;R=A===I?s.previousElementSibling===t&&!B||M&&B:s.previousElementSibling===t||t.previousElementSibling===s?(r.clientY-c.top)/Y>.5:I>A}else S||(R=P!==t&&!X||M&&X);var L=Z(i,b,t,l,s,c,r,R);!1!==L&&(1!==L&&-1!==L||(R=1===L),O=!0,setTimeout(K,30),G(w,C),t.contains(b)||(R&&!P?b.appendChild(t):s.parentNode.insertBefore(t,R?P:s)),e=t.parentNode,this._animate(l,t),this._animate(c,s))}}},_animate:function(t,e){var n=this.options.animation;if(n){var o=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),q(e,"transition","none"),q(e,"transform","translate3d("+(t.left-o.left)+"px,"+(t.top-o.top)+"px,0)"),e.offsetWidth,q(e,"transition","all "+n+"ms"),q(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){q(e,"transition",""),q(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;H(x,"touchmove",this._onTouchMove),H(x,"pointermove",this._onTouchMove),H(t,"mouseup",this._onDrop),H(t,"touchend",this._onDrop),H(t,"pointerup",this._onDrop),H(t,"touchcancel",this._onDrop),H(t,"pointercancel",this._onDrop),H(t,"selectstart",this)},_onDrop:function(r){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(w.pid),clearTimeout(this._dragStartTimer),H(x,"mousemove",this._onTouchMove),this.nativeDraggable&&(H(x,"drop",this),H(s,"dragstart",this._onDragStart)),this._offUpEvents(),r&&(_&&(r.preventDefault(),!l.dropBubble&&r.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),i!==e&&"clone"===W.active.lastPullMode||o&&o.parentNode&&o.parentNode.removeChild(o),t&&(this.nativeDraggable&&H(t,"dragend",this),J(t),!0===l.dragWillChange&&(t.style["will-change"]=""),V(t,this.options.ghostClass,!1),V(t,this.options.chosenClass,!1),Q(this,i,"unchoose",t,i,f),i!==e?(p=tt(t,l.draggable))>=0&&(Q(null,e,"add",t,i,f,p),Q(this,i,"remove",t,i,f,p),Q(null,e,"sort",t,i,f,p),Q(this,i,"sort",t,i,f,p)):t.nextSibling!==a&&(p=tt(t,l.draggable))>=0&&(Q(this,i,"update",t,i,f,p),Q(this,i,"sort",t,i,f,p)),W.active&&(null!=p&&-1!==p||(p=f),Q(W.active,i,"end",t,i,f,p),this.save()))),this._nulling()},_destroy:function(){this.destroy()},_nulling:function(){i=t=e=n=a=o=r=s=l=m=b=_=p=h=d=v=g=W.active=null,A.forEach(function(t){t.checked=!0}),A.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,i=n.length,a=this.options;o<i;o++)U(t=n[o],a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||$(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,o){var i=n.children[o];U(i,this.options.draggable,n)&&(e[t]=i)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return U(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&L(n)},destroy:function(){var t=this.el;t[E]=null,V(t,"sortable",!1),H(t,"mousedown",this._onTapStart),H(t,"touchstart",this._onTapStart),H(t,"pointerdown",this._onTapStart),H(t,"destroy",this._destroy),this.nativeDraggable&&(H(t,"dragover",this),H(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),I.splice(I.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},j(x,"touchmove",function(t){W.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){B={capture:!1,passive:!1}}}))}catch(t){}return W.utils={on:j,off:H,css:q,find:z,is:function(t,e){return!!U(t,e,t)},extend:ot,throttle:nt,closest:U,toggleClass:V,clone:it,index:tt},W.create=function(t,e){return new W(t,e)},W.destroy=function(t){var e;(e=x.createEvent("Event")).initEvent("destroy",!1,!1),t.dispatchEvent(e)},W.version="1.6.2",W});

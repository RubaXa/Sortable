/*! Sortable 1.2.0 - MIT | git://github.com/rubaxa/Sortable.git */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){this.el=a,this.options=b=t({},b),a[K]=this;var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0};for(var e in d)!(e in b)&&(b[e]=d[e]);var g=b.group;g&&"object"==typeof g||(g=b.group={name:g}),["pull","put"].forEach(function(a){a in g||(g[a]=!0)}),b.groups=" "+g.name+(g.put.join?" "+g.put.join(" "):"")+" ";for(var h in this)"_"===h.charAt(0)&&(this[h]=c(this,this[h]));f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"dragover",this),f(a,"dragenter",this),S.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){w&&w.state!==a&&(i(w,"display",a?"none":""),!a&&w.state&&x.insertBefore(w,u),w.state=a)}function c(a,b){var c=R.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(R.call(arguments)))}}function d(a,b,c){if(a){c=c||M,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function e(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,!1)}function g(a,b,c){a.removeEventListener(b,c,!1)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(J," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(J," ")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return M.defaultView&&M.defaultView.getComputedStyle?c=M.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function k(a,b,c,d,e,f,g){var h=M.createEvent("Event"),i=(a||b[K]).options,j="on"+c.charAt(0).toUpperCase()+c.substr(1);h.initEvent(c,!0,!0),h.to=b,h.from=e||b,h.item=d||b,h.clone=w,h.oldIndex=f,h.newIndex=g,i[j]&&i[j].call(a,h),b.dispatchEvent(h)}function l(a,b,c,d,e,f){var g,h,i=a[K],j=i.options.onMove;return j&&(g=M.createEvent("Event"),g.initEvent("move",!0,!0),g.to=b,g.from=a,g.dragged=c,g.draggedRect=d,g.related=e||b,g.relatedRect=f||b.getBoundingClientRect(),h=j.call(i,g)),h}function m(a){a.draggable=!1}function n(){P=!1}function o(a,b){for(var c=a.querySelectorAll(b.draggable),d=c.length-1;d--;)if(c[d].getAttribute("draggable")===!1)return c[d];return c[0]}function p(a,b,c){var d=o(a,b),e=d.getBoundingClientRect();return c.clientY-(e.top+e.height)>5&&d}function q(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function r(a){for(var b=0;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function s(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function t(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I={},J=/\s+/g,K="Sortable"+(new Date).getTime(),L=window,M=L.document,N=L.parseInt,O=!!("draggable"in M.createElement("div")),P=!1,Q=Math.abs,R=[].slice,S=[],T=s(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(A!==c&&(z=b.scroll,A=c,z===!0)){z=c;do if(z.offsetWidth<z.scrollWidth||z.offsetHeight<z.scrollHeight)break;while(z=z.parentNode)}z&&(d=z,e=z.getBoundingClientRect(),f=(Q(e.right-j)<=h)-(Q(e.left-j)<=h),g=(Q(e.bottom-k)<=h)-(Q(e.top-k)<=h)),f||g||(f=(h>=l-j)-(h>=j),g=(h>=m-k)-(h>=k),(f||g)&&(d=L)),(I.vx!==f||I.vy!==g||I.el!==d)&&(I.el=d,I.vx=f,I.vy=g,clearInterval(I.pid),d&&(I.pid=setInterval(function(){d===L?L.scrollTo(L.pageXOffset+f*i,L.pageYOffset+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30);return a.prototype={constructor:a,_onTapStart:function(a){var b=this,c=this.el,e=this.options,f=a.type,g=a.touches&&a.touches[0],h=(g||a).target,i=h,j=e.filter;if(!("mousedown"===f&&0!==a.button||e.disabled)&&(h=d(h,e.draggable,c))){if(D=r(h),"function"==typeof j){if(j.call(this,a,h,this))return k(b,i,"filter",h,c,D),void a.preventDefault()}else if(j&&(j=j.split(",").some(function(a){return a=d(i,a.trim(),c),a?(k(b,a,"filter",h,c,D),!0):void 0})))return void a.preventDefault();(!e.handle||d(i,e.handle,c))&&this._prepareDragStart(a,g,h)}},_prepareDragStart:function(a,b,c){var d,e=this,g=e.el,h=e.options,i=g.ownerDocument;c&&!u&&c.parentNode===g&&(G=a,x=g,u=c,y=u.nextSibling,F=h.group,d=function(){e._disableDelayedDrag(),u.draggable=!0,h.ignore.split(",").forEach(function(a){j(u,a.trim(),m)}),e._triggerDragStart(b)},f(i,"mouseup",e._onDrop),f(i,"touchend",e._onDrop),f(i,"touchcancel",e._onDrop),h.delay?(f(i,"mousemove",e._disableDelayedDrag),f(i,"touchmove",e._disableDelayedDrag),e._dragStartTimer=setTimeout(d,h.delay)):d())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),g(a,"mousemove",this._disableDelayedDrag),g(a,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(a){a?(G={target:u,clientX:a.clientX,clientY:a.clientY},this._onDragStart(G,"touch")):O?(f(u,"dragend",this),f(x,"dragstart",this._onDragStart)):this._onDragStart(G,!0);try{M.selection?M.selection.empty():window.getSelection().removeAllRanges()}catch(b){}},_dragStarted:function(){x&&u&&(h(u,this.options.ghostClass,!0),a.active=this,k(this,x,"start",u,x,D))},_emulateDragOver:function(){if(H){i(v,"display","none");var a=M.elementFromPoint(H.clientX,H.clientY),b=a,c=" "+this.options.group.name,d=S.length;if(b)do{if(b[K]&&b[K].options.groups.indexOf(c)>-1){for(;d--;)S[d]({clientX:H.clientX,clientY:H.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);i(v,"display","")}},_onTouchMove:function(a){if(G){var b=a.touches?a.touches[0]:a,c=b.clientX-G.clientX,d=b.clientY-G.clientY,e=a.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";H=b,i(v,"webkitTransform",e),i(v,"mozTransform",e),i(v,"msTransform",e),i(v,"transform",e),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),"clone"==F.pull&&(w=u.cloneNode(!0),i(w,"display","none"),x.insertBefore(w,u)),b){var e,g=u.getBoundingClientRect(),h=i(u);v=u.cloneNode(!0),i(v,"top",g.top-N(h.marginTop,10)),i(v,"left",g.left-N(h.marginLeft,10)),i(v,"width",g.width),i(v,"height",g.height),i(v,"opacity","0.8"),i(v,"position","fixed"),i(v,"zIndex","100000"),x.appendChild(v),e=v.getBoundingClientRect(),i(v,"width",2*g.width-e.width),i(v,"height",2*g.height-e.height),"touch"===b?(f(M,"touchmove",this._onTouchMove),f(M,"touchend",this._onDrop),f(M,"touchcancel",this._onDrop)):(f(M,"mousemove",this._onTouchMove),f(M,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,u)),f(M,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(a){var c,e,f,g=this.el,h=this.options,j=h.group,k=j.put,m=F===j,q=h.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!h.dragoverBubble&&a.stopPropagation()),F&&!h.disabled&&(m?q||(f=!x.contains(u)):F.pull&&k&&(F.name===j.name||k.indexOf&&~k.indexOf(F.name)))&&(void 0===a.rootEl||a.rootEl===this.el)){if(T(a,h,this.el),P)return;if(c=d(a.target,h.draggable,g),e=u.getBoundingClientRect(),f)return b(!0),void(w||y?x.insertBefore(u,w||y):q||x.appendChild(u));if(0===g.children.length||g.children[0]===v||g===a.target&&(c=p(g,h,a))){if(c){if(c.animated)return;s=c.getBoundingClientRect()}b(m),l(x,g,u,e,c,s)!==!1&&(g.insertBefore(u,o(g,h).nextSibling),this._animate(e,u),c&&this._animate(s,c))}else if(c&&!c.animated&&c!==u&&void 0!==c.parentNode[K]){B!==c&&(B=c,C=i(c));var r,s=c.getBoundingClientRect(),t=s.right-s.left,z=s.bottom-s.top,A=/left|right|inline/.test(C.cssFloat+C.display),D=c.offsetWidth>u.offsetWidth,E=c.offsetHeight>u.offsetHeight,G=(A?(a.clientX-s.left)/t:(a.clientY-s.top)/z)>.5,H=c.nextElementSibling,I=l(x,g,u,e,c,s);I!==!1&&(P=!0,setTimeout(n,30),b(m),r=1===I||-1===I?1===I:A?c.previousElementSibling===u&&!D||G&&D:H!==u&&!E||G&&E,c.parentNode.insertBefore(u,r?c.nextSibling:c),this._animate(e,u),this._animate(s,c))}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){i(b,"transition",""),i(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;g(M,"touchmove",this._onTouchMove),g(a,"mouseup",this._onDrop),g(a,"touchend",this._onDrop),g(a,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(I.pid),clearTimeout(this.dragStartTimer),g(M,"drop",this),g(M,"mousemove",this._onTouchMove),g(c,"dragstart",this._onDragStart),this._offUpEvents(),b&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation(),v&&v.parentNode.removeChild(v),u&&(g(u,"dragend",this),m(u),h(u,this.options.ghostClass,!1),x!==u.parentNode?(E=r(u),k(null,u.parentNode,"sort",u,x,D,E),k(this,x,"sort",u,x,D,E),k(null,u.parentNode,"add",u,x,D,E),k(this,x,"remove",u,x,D,E)):(w&&w.parentNode.removeChild(w),u.nextSibling!==y&&(E=r(u),k(this,x,"update",u,x,D,E),k(this,x,"sort",u,x,D,E))),a.active&&(k(this,x,"end",u,x,D,E),this.save())),x=u=v=y=w=z=A=G=H=B=C=F=a.active=null)},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?u&&(this._onDragOver(a),e(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],c=this.el.children,e=0,f=c.length,g=this.options;f>e;e++)a=c[e],d(a,g.draggable,this.el)&&b.push(a.getAttribute(g.dataIdAttr)||q(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){var f=c.children[e];d(f,this.options.draggable,c)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return d(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:void(c[a]=b)},destroy:function(){var a=this.el;a[K]=null,g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"dragover",this),g(a,"dragenter",this),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),S.splice(S.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},a.utils={on:f,off:g,css:i,find:j,bind:c,is:function(a,b){return!!d(a,b,a)},extend:t,throttle:s,closest:d,toggleClass:h,index:r},a.version="1.2.0",a.create=function(b,c){return new a(b,c)},a});